# üìò –ü–ª–∞–Ω –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ `PythonVisitor` –¥–ª—è –ø—Ä–æ–µ–∫—Ç–∞ Lobster

> –ó–∞ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–π –ø–æ–º–æ—â—å—é –∏–ª–∏ –¥–ª—è –∑–∞–ø—É—Å–∫–∞ –¥—Ä—É–≥–∏—Ö –Ω–µ–π—Ä–æ—Å–µ—Ç–µ–π –Ω–∞ —Ä—É—Å—Å–∫–æ–º, –∑–∞—Ö–æ–¥–∏ –Ω–∞ [GPTOnline.ai/ru](https://gptonline.ai/ru/)

---

## üéØ –¶–µ–ª—å

–°–æ–∑–¥–∞—Ç—å –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–π `PythonVisitor`, –∫–æ—Ç–æ—Ä—ã–π:

- –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ –ø–∞—Ä—Å–∏—Ç Python-–∫–æ–¥ –≤ AST
- –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –µ–≥–æ –æ–±—Ä–∞—Ç–Ω–æ –≤ Python-–∫–æ–¥ —Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º —Å—Ç—Ä—É–∫—Ç—É—Ä—ã, —Ç–∏–ø–æ–≤ –∏ —Å—Ç–∏–ª—è
- –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –≤—Å–µ –∫–ª—é—á–µ–≤—ã–µ —Ñ–∏—á–∏ —è–∑—ã–∫–∞: –∫–ª–∞—Å—Å—ã, –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä—ã, –Ω–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ, async, property, etc.
- –†–µ–∞–ª–∏–∑—É–µ—Ç AOT-–∫–æ–º–ø–∏–ª—è—Ü–∏—é —Ñ—É–Ω–∫—Ü–∏–π —Å –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–π –∑–∞–º–µ–Ω–æ–π –Ω–∞ –∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞–Ω–Ω—É—é –≤–µ—Ä—Å–∏—é

---

## üì¶ –ë–∞–∑–æ–≤–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ AST-—É–∑–ª–æ–≤ (must have)

### –°—Ç—Ä—É–∫—Ç—É—Ä–Ω—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã:
- [x] `Module`
- [x] `FunctionDef`
- [x] `AsyncFunctionDef`
- [x] `ClassDef`
- [x] `If`, `Else`, `Elif`
- [x] `For`, `While`, `Break`, `Continue`, `Pass`
- [x] `Try`, `Except`, `Finally`, `Raise`

### –†–∞–±–æ—Ç–∞ —Å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏:
- [x] `Assign`, `AnnAssign`
- [x] `AugAssign`
- [x] `Global`, `Nonlocal`
- [x] `Delete`

### –í—ã—Ä–∞–∂–µ–Ω–∏—è:
- [x] `Expr`, `Call`
- [x] `BinOp`, `BoolOp`, `UnaryOp`
- [x] `Compare`, `IfExp`
- [x] `Lambda`, `Yield`, `Await`
- [x] `Subscript`, `Attribute`, `Name`, `Constant`, `List`, `Dict`, `Set`, `Tuple`

### –ò–º–ø–æ—Ä—Ç—ã:
- [x] `Import`, `ImportFrom`
- [x] –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –≤–ª–æ–∂–µ–Ω–Ω–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–µ—Ä–µ–≤–∞ –∏–º–ø–æ—Ä—Ç–æ–≤ (–æ–ø—Ü–∏—è `--rebuild_imports_tree`)
- [x] –°–æ–∑–¥–∞–Ω–∏–µ `__init__.py` –≤ –ø–æ–¥–ø–∞–ø–∫–∞—Ö

---

## üß† –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### üéØ 1. –î–µ–∫–æ—Ä–∞—Ç–æ—Ä—ã
- [x] –ü—Ä–æ—Å—Ç—ã–µ (`@decorator`)
- [x] –í–ª–æ–∂–µ–Ω–Ω—ã–µ (`@outer(arg)(@inner)`)
- [ ] –û–±—Ä–∞–±–æ—Ç–∫–∞ –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤ –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä–∞
- [ ] –£—á–∏—Ç—ã–≤–∞—Ç—å –ø–æ—Ä—è–¥–æ–∫ –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä–æ–≤

### üéØ 2. –ê—Ä–≥—É–º–µ–Ω—Ç—ã —Ñ—É–Ω–∫—Ü–∏–π
- [x] –ü–æ–∑–∏—Ü–∏–æ–Ω–Ω—ã–µ —Å –∞–Ω–Ω–æ—Ç–∞—Ü–∏—è–º–∏
- [ ] `*args`, `**kwargs`
- [ ] –ó–Ω–∞—á–µ–Ω–∏—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é —Ä–∞–∑–Ω—ã—Ö —Ç–∏–ø–æ–≤
- [ ] –ê–Ω–Ω–æ—Ç–∞—Ü–∏–∏ —Å `Optional`, `List[str]`, –∏ –¥—Ä.

### üéØ 3. –ü–æ–¥–¥–µ—Ä–∂–∫–∞ async/await
- [x] `AsyncFunctionDef`
- [x] `Await`, `AsyncWith`, `AsyncFor`

### üéØ 4. –û–±—ä–µ–∫—Ç—ã
- [x] –ü–æ–¥–¥–µ—Ä–∂–∫–∞ `@property`
- [ ] –í–ª–æ–∂–µ–Ω–Ω—ã–µ –∫–ª–∞—Å—Å—ã
- [x] –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω–æ–µ –Ω–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ
- [ ] `super()`, `__init__`, `__str__`, `__repr__` –∏ –¥—Ä.

### üéØ 5. –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –∏ docstring
- [x] –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ docstring —á–µ—Ä–µ–∑ `get_docstring()`
- [ ] –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã—Ö/inline –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤

---

### üéØ 6. AOT-–∫–æ–º–ø–∏–ª—è—Ü–∏—è —Å –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–π –∑–∞–º–µ–Ω–æ–π

#### üìå –û–ø–∏—Å–∞–Ω–∏–µ:
–°–æ–∑–¥–∞—Ç—å –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä `@compile_and_replace(lang='cython')`, –∫–æ—Ç–æ—Ä—ã–π:
- –ü—Ä–∏ –ø–µ—Ä–≤–æ–º –≤—ã–∑–æ–≤–µ —Ñ—É–Ω–∫—Ü–∏–∏:
  1. –°–æ–±–∏—Ä–∞–µ—Ç –µ—ë AST –∏ —Å—Ç–µ–∫ –≤—ã–∑–æ–≤–æ–≤
  2. –¢—Ä–∞–Ω—Å–ø–∞–π–ª–∏—Ç —á–µ—Ä–µ–∑ Lobster –≤ —É–∫–∞–∑–∞–Ω–Ω—ã–π —è–∑—ã–∫
  3. –ö–æ–º–ø–∏–ª–∏—Ä—É–µ—Ç –ø–æ–ª—É—á–µ–Ω–Ω—ã–π –∫–æ–¥
  4. –ò–º–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç –∏ –∑–∞–º–µ–Ω—è–µ—Ç –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—É—é —Ñ—É–Ω–∫—Ü–∏—é
- –ü–æ–≤–µ–¥–µ–Ω–∏–µ –∞–Ω–∞–ª–æ–≥–∏—á–Ω–æ JIT, –Ω–æ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–µ–µ –Ω–∞–∑–≤–∞—Ç—å –µ–≥–æ:
  - **AOT (Ahead-Of-Time) Compilation with Dynamic Dispatch**

#### üõ†Ô∏è –®–∞–≥–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏:
1. **–°–æ–∑–¥–∞–Ω–∏–µ –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä–∞**
2. **–ê–Ω–∞–ª–∏–∑ AST –∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏**
3. **–§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –º–∏–Ω–∏-–º–æ–¥—É–ª—è**
4. **–ó–∞–ø—É—Å–∫ Lobster —Å –Ω—É–∂–Ω—ã–º visitor**
5. **–ö–æ–º–ø–∏–ª—è—Ü–∏—è —á–µ—Ä–µ–∑ `pyximport`/`ctypes`/`maturin`**
6. **–ò–º–ø–æ—Ä—Ç –∏ `functools.wraps` –¥–ª—è –ø–æ–¥–º–µ–Ω—ã**
7. **–ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏**

---

## üîß –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∏ —É—Ç–∏–ª–∏—Ç—ã

### üí° –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:
- `BaseModuleVisitor.visit_*`
- `get_tab()` ‚Äî —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Ç—Å—Ç—É–ø–æ–≤
- `parse_func_args()` ‚Äî —Ä–∞–∑–±–æ—Ä –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤
- `parse_func_body()` ‚Äî —Ä–∞–∑–±–æ—Ä —Ç–µ–ª–∞ —Ñ—É–Ω–∫—Ü–∏–∏
- `parse_decorators_list()` ‚Äî –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä—ã

### üõ†Ô∏è –†–∞—Å—à–∏—Ä–∏—Ç—å:
- `visit_Expr`, `visit_Call`, `visit_Assign`, `visit_ImportFrom`
- –î–æ–±–∞–≤–∏—Ç—å –ø–∞—Ä—Å–∏–Ω–≥ –≤–ª–æ–∂–µ–Ω–Ω—ã—Ö –±–ª–æ–∫–æ–≤

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### üìÇ –ü—Ä–∏–º–µ—Ä—ã:
- `sources/func.py`, `sources/decorator.py`, `sources/multiple_inheritance.py`

### ‚úîÔ∏è –ü—Ä–æ–≤–µ—Ä–∫–∞:
- –¢–æ—á–Ω–æ—Å—Ç—å —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏–∏ AST ‚Üí Python ‚Üí AST
- –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å–µ–º–∞–Ω—Ç–∏–∫–∏ (—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏)
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤—Å–µ—Ö –≤–µ—Ç–≤–µ–π –∫–æ–¥–∞ (try/except/finally)
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä–∞ AOT: –≤—ã–∑–æ–≤ ‚Üí –∫–æ–º–ø–∏–ª—è—Ü–∏—è ‚Üí –ø–æ–¥–º–µ–Ω–∞ ‚Üí –ø–æ–≤—Ç–æ—Ä–Ω—ã–π –≤—ã–∑–æ–≤

---

## ‚úÖ –§–∏–Ω–∞–ª

- [ ] –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ `visitor.transpile()` –æ–±—Ö–æ–¥–∏—Ç –≤—Å–µ —É–∑–ª—ã
- [ ] –†–µ–∑—É–ª—å—Ç–∞—Ç `visitor.save_result_source()` = –≤–∞–ª–∏–¥–Ω—ã–π `.py`-—Ñ–∞–π–ª
- [ ] –î–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å `README.md`

---
